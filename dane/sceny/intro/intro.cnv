OBJECT=CALLBACK_TIMER_ROUTINE
CALLBACK_TIMER_ROUTINE:TYPE=STRING

OBJECT=CALLBACK_TIMER
CALLBACK_TIMER:TYPE=TIMER
CALLBACK_TIMER:ENABLED=TRUE
CALLBACK_TIMER:ELAPSE=100
CALLBACK_TIMER:TICKS=1
CALLBACK_TIMER:ONTICK^1={ /
    CALLBACK_TIMER^RESET(); /
    CALLBACK_TIMER^ENABLE(); /
    @IF(ROUTINE_TO_CALL, "!_", NULL, "{CALLBACK_TIMER_ROUTINE^SET(ROUTINE_TO_CALL); ROUTINE_TO_CALL^SET(NULL); *CALLBACK_TIMER_ROUTINE^RUN();}", ""); /
}

OBJECT=KEYBOARD
KEYBOARD:TYPE=KEYBOARD
KEYBOARD:ONKEYDOWN={ /
    @IF(KEYBOARD^GETLATESTKEY(), "_", "ESC", "{EPISODE^GOTO("MENU"); TEXTBOX_BREAK^RUN(); }", ""); /
}

OBJECT=INTRO_CINEMATIC
INTRO_CINEMATIC:TYPE=ANIMO
INTRO_CINEMATIC:VISIBLE=TRUE
INTRO_CINEMATIC:TOCANVAS=TRUE
INTRO_CINEMATIC:PRIORITY=100
INTRO_CINEMATIC:FILENAME=CINEMATIC.ANN
INTRO_CINEMATIC:FPS=8
INTRO_CINEMATIC:ONFINISHED={@IF(INTRO_SOUND^ISPLAYING(), "_", FALSE, "ON_INTRO_END", "");}
INTRO_CINEMATIC:ONCLICK=ON_INTRO_END

OBJECT=INTRO_SOUND
INTRO_SOUND:TYPE=SOUND
INTRO_SOUND:FILENAME=..\INTRO.WAV
INTRO_SOUND:ONFINISHED={@IF(INTRO_CINEMATIC^ISPLAYING(), "_", FALSE, "ON_INTRO_END", "");}

OBJECT=__INIT__
__INIT__:TYPE=BEHAVIOUR
__INIT__:CODE={ /
    ARRAYPRZEDMIOTY^REMOVEALL(); /
    BEHINITCUTSCENE^RUN("INTRO"); /
    INTRO_CINEMATIC^PLAY("PLAY"); /
    INTRO_SOUND^PLAY(); /
    INTRO_CINEMATIC^SETASBUTTON(TRUE, TRUE); /
}

OBJECT=ON_INTRO_END
ON_INTRO_END:TYPE=BEHAVIOUR
ON_INTRO_END:CODE={ /
    EPISODE^GOTO("WARSZTAT"); /
}
